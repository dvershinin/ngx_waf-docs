(window.webpackJsonp=window.webpackJsonp||[]).push([[50],{439:function(_,t,a){"use strict";a.r(t);var v=a(46),r=Object(v.a)({},(function(){var _=this,t=_.$createElement,a=_._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":_.$parent.slotKey}},[a("h1",{attrs:{id:"更新日志-current"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#更新日志-current"}},[_._v("#")]),_._v(" 更新日志（Current）")]),_._v(" "),a("p",[_._v("本文件的格式基于"),a("a",{attrs:{href:"https://keepachangelog.com/zh-CN/1.0.0",target:"_blank",rel:"noopener noreferrer"}},[_._v("如何维护更新日志"),a("OutboundLink")],1),_._v("，\n并且本项目遵守"),a("a",{attrs:{href:"https://semver.org/lang/zh-CN/spec/v2.0.0.html",target:"_blank",rel:"noopener noreferrer"}},[_._v("语义化版本"),a("OutboundLink")],1),_._v("。")]),_._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[_._v("何为「不兼容的修改」？")]),_._v(" "),a("ul",[a("li",[_._v("原有的配置文件可能无法使用，比如删除或者重命名了某个配置项。")]),_._v(" "),a("li",[_._v("可能需要更新编译环境，比如安装新的依赖。")])])]),_._v(" "),a("h2",{attrs:{id:"未发布"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#未发布"}},[_._v("#")]),_._v(" [未发布]")]),_._v(" "),a("h3",{attrs:{id:"新增"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#新增"}},[_._v("#")]),_._v(" 新增")]),_._v(" "),a("h3",{attrs:{id:"移除"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#移除"}},[_._v("#")]),_._v(" 移除")]),_._v(" "),a("h3",{attrs:{id:"变动"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#变动"}},[_._v("#")]),_._v(" 变动")]),_._v(" "),a("h3",{attrs:{id:"修复"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#修复"}},[_._v("#")]),_._v(" 修复")]),_._v(" "),a("hr"),_._v(" "),a("h2",{attrs:{id:"_9-0-1-2021-09-24-utc-0800"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_9-0-1-2021-09-24-utc-0800"}},[_._v("#")]),_._v(" [9.0.1] - 2021-09-24 UTC+0800")]),_._v(" "),a("h3",{attrs:{id:"修复-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#修复-2"}},[_._v("#")]),_._v(" 修复")]),_._v(" "),a("ul",[a("li",[_._v("未能正确读取 ModSecurity 的规则。")])]),_._v(" "),a("hr"),_._v(" "),a("h2",{attrs:{id:"_9-0-0-2021-09-23-utc-0800"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_9-0-0-2021-09-23-utc-0800"}},[_._v("#")]),_._v(" [9.0.0] - 2021-09-23 UTC+0800")]),_._v(" "),a("h3",{attrs:{id:"注意"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#注意"}},[_._v("#")]),_._v(" "),a("strong",[_._v("注意")])]),_._v(" "),a("p",[_._v("如果您想要升级到此版本，请查看文档中的跨版本升级的指南。")]),_._v(" "),a("h3",{attrs:{id:"新增-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#新增-2"}},[_._v("#")]),_._v(" 新增")]),_._v(" "),a("ul",[a("li",[a("p",[_._v("兼容了"),a("a",{attrs:{href:"https://github.com/SpiderLabs/ModSecurity",target:"_blank",rel:"noopener noreferrer"}},[_._v("ModSecurity"),a("OutboundLink")],1),_._v(" 的规则。")])]),_._v(" "),a("li",[a("p",[_._v("增加了两个指令："),a("code",[_._v("waf_modsecurity")]),_._v(" 和 "),a("code",[_._v("waf_modsecurity_transaction_id")]),_._v("。")])]),_._v(" "),a("li",[a("p",[_._v("为指令 "),a("code",[_._v("waf_priority")]),_._v(" 增加了参数 "),a("code",[_._v("MODSECURITY")]),_._v("。")])])]),_._v(" "),a("h3",{attrs:{id:"移除-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#移除-2"}},[_._v("#")]),_._v(" 移除")]),_._v(" "),a("ul",[a("li",[a("p",[_._v("删除了指令 "),a("code",[_._v("waf_mode")]),_._v(" 的一些参数："),a("code",[_._v("LIBINJECTION")]),_._v("、"),a("code",[_._v("LIBINJECTION-SQLI")]),_._v("、"),a("code",[_._v("LIBINJECTION-XSS")]),_._v(" 和 "),a("code",[_._v("ADV")]),_._v("。")])]),_._v(" "),a("li",[a("p",[_._v("删除了指令 "),a("code",[_._v("waf_priority")]),_._v(" 的参数 "),a("code",[_._v("ADV")]),_._v("。")])]),_._v(" "),a("li",[a("p",[_._v("删除了依赖 "),a("a",{attrs:{href:"https://github.com/libinjection/libinjection",target:"_blank",rel:"noopener noreferrer"}},[_._v("libinjection"),a("OutboundLink")],1),_._v("。")])])]),_._v(" "),a("h3",{attrs:{id:"修复-3"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#修复-3"}},[_._v("#")]),_._v(" 修复")]),_._v(" "),a("ul",[a("li",[a("p",[_._v("当验证码通过时不再返回 404 状态码，而是返回 204 状态码。")])]),_._v(" "),a("li",[a("p",[_._v("有时不会完整地检查请求体。")])])]),_._v(" "),a("hr"),_._v(" "),a("h2",{attrs:{id:"_8-0-3-2021-08-27-utc-0800"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_8-0-3-2021-08-27-utc-0800"}},[_._v("#")]),_._v(" [8.0.3] - 2021-08-27 UTC+0800")]),_._v(" "),a("h3",{attrs:{id:"修复-4"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#修复-4"}},[_._v("#")]),_._v(" 修复")]),_._v(" "),a("ul",[a("li",[a("p",[_._v("内存泄露")])]),_._v(" "),a("li",[a("p",[_._v("一个没有初始化的结构体字段，会导致错误日志中出现大量的 "),a("code",[_._v("malloc(size) failed (12: Out of memory)")]),_._v("。")])])]),_._v(" "),a("hr"),_._v(" "),a("h2",{attrs:{id:"_8-0-2-2021-08-27-utc-0800"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_8-0-2-2021-08-27-utc-0800"}},[_._v("#")]),_._v(" [8.0.2] - 2021-08-27 UTC+0800")]),_._v(" "),a("h3",{attrs:{id:"修复-5"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#修复-5"}},[_._v("#")]),_._v(" 修复")]),_._v(" "),a("ul",[a("li",[a("p",[_._v("开启验证码后 nginx 崩溃（段错误），原因是未能正确合并不同级别的 "),a("code",[_._v("waf_captcha")]),_._v(" 指令。")])]),_._v(" "),a("li",[a("p",[_._v("不能显示验证码页面，原因是未能正确合并不同级别的 "),a("code",[_._v("waf_captcha")]),_._v(" 指令。")])]),_._v(" "),a("li",[a("p",[_._v("如果使用了 "),a("code",[_._v("proxy_pass")]),_._v(" 指令，Under-Attack-Mode 和验证码均不能正常工作。")])])]),_._v(" "),a("hr"),_._v(" "),a("h2",{attrs:{id:"_8-0-1-2021-08-23-utc-0800"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_8-0-1-2021-08-23-utc-0800"}},[_._v("#")]),_._v(" [8.0.1] - 2021-08-23 UTC+0800")]),_._v(" "),a("h3",{attrs:{id:"新增-3"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#新增-3"}},[_._v("#")]),_._v(" 新增")]),_._v(" "),a("ul",[a("li",[_._v("当 CC 防护返回 444 状态码时不再生成额外的响应头。")])]),_._v(" "),a("h3",{attrs:{id:"修复-6"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#修复-6"}},[_._v("#")]),_._v(" 修复")]),_._v(" "),a("ul",[a("li",[a("p",[_._v("当 "),a("code",[_._v("User-Agent")]),_._v(" 为空时会引发段错误。")])]),_._v(" "),a("li",[a("p",[_._v("不能正确合并指令 "),a("code",[_._v("waf_http_status")]),_._v("。")])])]),_._v(" "),a("hr"),_._v(" "),a("h2",{attrs:{id:"_8-0-0-2021-08-21-utc-0800"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_8-0-0-2021-08-21-utc-0800"}},[_._v("#")]),_._v(" [8.0.0] - 2021-08-21 UTC+0800")]),_._v(" "),a("h3",{attrs:{id:"注意-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#注意-2"}},[_._v("#")]),_._v(" "),a("strong",[_._v("注意")])]),_._v(" "),a("p",[_._v("如果您想要升级到此版本，请查看文档中的跨版本升级的指南。")]),_._v(" "),a("h3",{attrs:{id:"新增-4"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#新增-4"}},[_._v("#")]),_._v(" 新增")]),_._v(" "),a("ul",[a("li",[a("p",[_._v("引入了第三方平台的验证码，支持 hCaptcha、reCAPTCHAv2 和 reCAPTCHAv3，相关的指令为 "),a("code",[_._v("waf_captcha")]),_._v("。")])]),_._v(" "),a("li",[a("p",[_._v("支持识别友好爬虫，包括 GooleBot、BingBot、BaiduSpider 和 YandexBot，识别成功后自动放行，相关的指令为 "),a("code",[_._v("waf_verify_bot")]),_._v("。")])]),_._v(" "),a("li",[a("p",[_._v("CC 防护支持开启验证码模式，开启后当请求频率超出限制后会启用验证码，如果连续三次验证失败则拉黑 IP，反之则重新统计请求频率。")])])]),_._v(" "),a("h3",{attrs:{id:"变动-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#变动-2"}},[_._v("#")]),_._v(" 变动")]),_._v(" "),a("ul",[a("li",[a("p",[_._v("指令 "),a("code",[_._v("waf_mode")]),_._v(" 的语法有所变化，详见文档中的跨版本升级的指南。")])]),_._v(" "),a("li",[a("p",[_._v("指令 "),a("code",[_._v("waf_cc_deny")]),_._v(" 的语法有所变化，详见文档中的跨版本升级的指南。")])]),_._v(" "),a("li",[a("p",[_._v("指令 "),a("code",[_._v("waf_cache")]),_._v(" 的语法有所变化，详见文档中的跨版本升级的指南。")])]),_._v(" "),a("li",[a("p",[_._v("支持修改「请求体检查」的优先级。")])])]),_._v(" "),a("h3",{attrs:{id:"移除-3"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#移除-3"}},[_._v("#")]),_._v(" 移除")]),_._v(" "),a("ul",[a("li",[_._v("移除了指令 "),a("code",[_._v("waf_cache")]),_._v(" 的两个参数，分别是 "),a("code",[_._v("interval")]),_._v(" 和 "),a("code",[_._v("percent")]),_._v("。")])]),_._v(" "),a("hr"),_._v(" "),a("h2",{attrs:{id:"_7-1-0-2021-08-16-utc-0800"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_7-1-0-2021-08-16-utc-0800"}},[_._v("#")]),_._v(" [7.1.0] - 2021-08-16 UTC+0800")]),_._v(" "),a("h3",{attrs:{id:"新增-5"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#新增-5"}},[_._v("#")]),_._v(" 新增")]),_._v(" "),a("ul",[a("li",[_._v("配置项 "),a("code",[_._v("waf_cc_deny")]),_._v(" 的参数 "),a("code",[_._v("rate")]),_._v(" 允许更多个格式，如 "),a("code",[_._v("500r/s")]),_._v("、"),a("code",[_._v("500r/60s")]),_._v("、"),a("code",[_._v("500r/m")]),_._v("、"),a("code",[_._v("500r/60m")]),_._v("、"),a("code",[_._v("500r/h")]),_._v("、"),a("code",[_._v("500r/60h")]),_._v(" 和 "),a("code",[_._v("500r/d")]),_._v("。")])]),_._v(" "),a("hr"),_._v(" "),a("h2",{attrs:{id:"_7-0-1-2021-08-11-utc-0800"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_7-0-1-2021-08-11-utc-0800"}},[_._v("#")]),_._v(" [7.0.1] - 2021-08-11 UTC+0800")]),_._v(" "),a("h3",{attrs:{id:"修复-7"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#修复-7"}},[_._v("#")]),_._v(" 修复")]),_._v(" "),a("ul",[a("li",[a("p",[_._v("不能正确解析 IP 黑白名单中的 "),a("code",[_._v("0.0.0.0/0")]),_._v("。")])]),_._v(" "),a("li",[a("p",[_._v("兼容不支持 IPV6 的运行环境。")])])]),_._v(" "),a("hr"),_._v(" "),a("h2",{attrs:{id:"_7-0-0-2021-08-04-utc-0800"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_7-0-0-2021-08-04-utc-0800"}},[_._v("#")]),_._v(" [7.0.0] - 2021-08-04 UTC+0800")]),_._v(" "),a("h3",{attrs:{id:"变动-3"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#变动-3"}},[_._v("#")]),_._v(" 变动")]),_._v(" "),a("ul",[a("li",[a("p",[_._v("改变了 Under Attack Mode 的实现方式。不再使用重定向实现，而是通过修改响应体实现。")])]),_._v(" "),a("li",[a("p",[_._v("删除了配置项 "),a("code",[_._v("waf_under_attack")]),_._v(" 的参数 "),a("code",[_._v("uri")]),_._v("，详情见文档。")])]),_._v(" "),a("li",[a("p",[_._v("为配置项 "),a("code",[_._v("waf_under_attack")]),_._v(" 增加了一个参数 "),a("code",[_._v("file")]),_._v("，该参数的值应该是一个 HTML 文件的绝对路径，详情见文档。")])]),_._v(" "),a("li",[a("p",[_._v("不允许在 "),a("code",[_._v("http")]),_._v(" 这一级中使用配置项 "),a("code",[_._v("waf_cc_deny")]),_._v("。")])])])])}),[],!1,null,null,null);t.default=r.exports}}]);